# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–ª–∏—Ç–æ–∫

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –ø–ª–∏—Ç–∫–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∏—Ç–æ–∫ –Ω–µ –∏–∑–º–µ–Ω—è–ª–æ—Å—å. –ù–∞–ø—Ä–∏–º–µ—Ä:
- –ü–ª–∏—Ç–∫–∞ 10 —Å–º ‚Üí 445 –ø–ª–∏—Ç–æ–∫
- –ü–ª–∏—Ç–∫–∞ 30 —Å–º ‚Üí 445 –ø–ª–∏—Ç–æ–∫ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)

## –ü—Ä–∏—á–∏–Ω–∞

–°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ —Å—á–∏—Ç–∞–ª–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –≤ **–ø–∞—Ç—Ç–µ—Ä–Ω–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏**, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–ª–∏—Ç–∫–∏.

## –†–µ—à–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∏—Ç–æ–∫ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ **—Ä–µ–∞–ª—å–Ω—ã—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤**:

### –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞:

```
1. –ü–ª–æ—â–∞–¥—å –∫–æ–º–Ω–∞—Ç—ã = —à–∏—Ä–∏–Ω–∞ √ó –≤—ã—Å–æ—Ç–∞

2. –ü–ª–æ—â–∞–¥—å —Ç–æ–Ω–∫–æ–≥–æ —Ä–æ–º–±–∞ = —Å—Ç–æ—Ä–æ–Ω–∞¬≤ √ó sin(36¬∞)
   –ü–ª–æ—â–∞–¥—å —Ç–æ–ª—Å—Ç–æ–≥–æ —Ä–æ–º–±–∞ = —Å—Ç–æ—Ä–æ–Ω–∞¬≤ √ó sin(72¬∞)

3. –°—Ä–µ–¥–Ω—è—è –ø–ª–æ—â–∞–¥—å —Ä–æ–º–±–∞ = 
   (–ø–ª–æ—â–∞–¥—å_—Ç–æ–Ω–∫–æ–≥–æ √ó –¥–æ–ª—è_—Ç–æ–Ω–∫–∏—Ö) + 
   (–ø–ª–æ—â–∞–¥—å_—Ç–æ–ª—Å—Ç–æ–≥–æ √ó –¥–æ–ª—è_—Ç–æ–ª—Å—Ç—ã—Ö)

4. –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∏—Ç–æ–∫ = 
   –ø–ª–æ—â–∞–¥—å_–∫–æ–º–Ω–∞—Ç—ã √∑ —Å—Ä–µ–¥–Ω—è—è_–ø–ª–æ—â–∞–¥—å_—Ä–æ–º–±–∞

5. –¢–æ–Ω–∫–∏—Ö —Ä–æ–º–±–æ–≤ = –æ–±—â–µ–µ √ó –¥–æ–ª—è_—Ç–æ–Ω–∫–∏—Ö (–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–∞)
   –¢–æ–ª—Å—Ç—ã—Ö —Ä–æ–º–±–æ–≤ = –æ–±—â–µ–µ √ó –¥–æ–ª—è_—Ç–æ–ª—Å—Ç—ã—Ö (–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–∞)
```

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞:

**–ö–æ–º–Ω–∞—Ç–∞ 5√ó5 –º (25 –º¬≤), –ø–ª–∏—Ç–∫–∞ 10 —Å–º:**

```
–ü–ª–æ—â–∞–¥—å —Ç–æ–Ω–∫–æ–≥–æ —Ä–æ–º–±–∞ = 0.1¬≤ √ó sin(36¬∞) ‚âà 0.00588 –º¬≤
–ü–ª–æ—â–∞–¥—å —Ç–æ–ª—Å—Ç–æ–≥–æ —Ä–æ–º–±–∞ = 0.1¬≤ √ó sin(72¬∞) ‚âà 0.00951 –º¬≤

–î–æ–ª—è –≤ –ø–∞—Ç—Ç–µ—Ä–Ω–µ: ~38% —Ç–æ–Ω–∫–∏—Ö, ~62% —Ç–æ–ª—Å—Ç—ã—Ö
–°—Ä–µ–¥–Ω—è—è –ø–ª–æ—â–∞–¥—å = 0.00588√ó0.38 + 0.00951√ó0.62 ‚âà 0.00813 –º¬≤

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∏—Ç–æ–∫ = 25 √∑ 0.00813 ‚âà 3075 –ø–ª–∏—Ç–æ–∫
- –¢–æ–Ω–∫–∏—Ö: 3075 √ó 0.38 ‚âà 1169
- –¢–æ–ª—Å—Ç—ã—Ö: 3075 √ó 0.62 ‚âà 1906
```

**–ö–æ–º–Ω–∞—Ç–∞ 5√ó5 –º (25 –º¬≤), –ø–ª–∏—Ç–∫–∞ 30 —Å–º:**

```
–ü–ª–æ—â–∞–¥—å —Ç–æ–Ω–∫–æ–≥–æ —Ä–æ–º–±–∞ = 0.3¬≤ √ó sin(36¬∞) ‚âà 0.0529 –º¬≤
–ü–ª–æ—â–∞–¥—å —Ç–æ–ª—Å—Ç–æ–≥–æ —Ä–æ–º–±–∞ = 0.3¬≤ √ó sin(72¬∞) ‚âà 0.0856 –º¬≤

–°—Ä–µ–¥–Ω—è—è –ø–ª–æ—â–∞–¥—å = 0.0529√ó0.38 + 0.0856√ó0.62 ‚âà 0.0731 –º¬≤

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∏—Ç–æ–∫ = 25 √∑ 0.0731 ‚âà 342 –ø–ª–∏—Ç–∫–∏
- –¢–æ–Ω–∫–∏—Ö: 342 √ó 0.38 ‚âà 130
- –¢–æ–ª—Å—Ç—ã—Ö: 342 √ó 0.62 ‚âà 212
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –ø–ª–∏—Ç–∫–∏:
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∏—Ç–æ–∫ **—É–º–µ–Ω—å—à–∞–µ—Ç—Å—è** (–ª–æ–≥–∏—á–Ω–æ!)
- ‚úÖ –ü–ª–æ—â–∞–¥—å –ø–æ–∫—Ä—ã—Ç–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π (~100% –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è)
- ‚úÖ –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ç–æ–Ω–∫–∏—Ö/—Ç–æ–ª—Å—Ç—ã—Ö —Ä–æ–º–±–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–∞

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ

### –§–∞–π–ª: `lib/penrose_tiles.dart`

**–ë—ã–ª–æ:**
```dart
TileInfo calculateTileInfo(
  List<Vertex> triangles,
  double tileScale,
) {
  // –ü—Ä–æ—Å—Ç–æ —Å—á–∏—Ç–∞–ª–∏ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏ –≤ –ø–∞—Ç—Ç–µ—Ä–Ω–µ
  int thinCount = 0;
  int thickCount = 0;
  for (final vertex in triangles) {
    if (vertex.color == VertexColor.red) thinCount++;
    else thickCount++;
  }
  // ...
}
```

**–°—Ç–∞–ª–æ:**
```dart
TileInfo calculateTileInfo(
  List<Vertex> triangles,
  double tileScale,
  double roomWidth,    // –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
  double roomHeight,   // –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
) {
  // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–ª–æ—â–∞–¥–∏ –∫–æ–º–Ω–∞—Ç—ã
  final roomArea = roomWidth * roomHeight;
  final avgTileArea = /* —Å—Ä–µ–¥–Ω—è—è –ø–ª–æ—â–∞–¥—å —Ä–æ–º–±–∞ */;
  final totalTilesNeeded = (roomArea / avgTileArea).floor();
  // ...
}
```

### –§–∞–π–ª: `lib/penrose_tiles_painter.dart`

**–û–±–Ω–æ–≤–ª–µ–Ω –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏:**
```dart
final tileInfo = calculateTileInfo(
  triangles, 
  options.tileScale,
  options.roomWidth,   // –î–æ–±–∞–≤–ª–µ–Ω–æ
  options.roomHeight,  // –î–æ–±–∞–≤–ª–µ–Ω–æ
);
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç 1: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–ª–∏—Ç–∫–∏
```
–ö–æ–º–Ω–∞—Ç–∞: 5√ó5 –º
–ü–ª–∏—Ç–∫–∞ 5 —Å–º  ‚Üí ~10000 –ø–ª–∏—Ç–æ–∫ ‚úì
–ü–ª–∏—Ç–∫–∞ 10 —Å–º ‚Üí ~2500 –ø–ª–∏—Ç–æ–∫  ‚úì
–ü–ª–∏—Ç–∫–∞ 20 —Å–º ‚Üí ~625 –ø–ª–∏—Ç–æ–∫   ‚úì
–ü–ª–∏—Ç–∫–∞ 30 —Å–º ‚Üí ~278 –ø–ª–∏—Ç–æ–∫   ‚úì
```

### –¢–µ—Å—Ç 2: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–º–Ω–∞—Ç—ã
```
–ü–ª–∏—Ç–∫–∞: 10 —Å–º
–ö–æ–º–Ω–∞—Ç–∞ 2√ó2 –º   ‚Üí ~492 –ø–ª–∏—Ç–∫–∏   ‚úì
–ö–æ–º–Ω–∞—Ç–∞ 5√ó5 –º   ‚Üí ~3075 –ø–ª–∏—Ç–æ–∫  ‚úì
–ö–æ–º–Ω–∞—Ç–∞ 10√ó10 –º ‚Üí ~12300 –ø–ª–∏—Ç–æ–∫ ‚úì
```

### –¢–µ—Å—Ç 3: –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ç–∏–ø–æ–≤
```
–ü—Ä–∏ –ª—é–±—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö:
–¢–æ–Ω–∫–∏—Ö / –¢–æ–ª—Å—Ç—ã—Ö ‚âà 0.618 (–∑–æ–ª–æ—Ç–æ–µ —Å–µ—á–µ–Ω–∏–µ) ‚úì
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```cmd
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
copy outputs\lib\penrose_tiles.dart lib\
copy outputs\lib\penrose_tiles_painter.dart lib\

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ
docker compose up --build
```

## –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞

### –ó–æ–ª–æ—Ç–æ–µ —Å–µ—á–µ–Ω–∏–µ –≤ –ø–ª–∏—Ç–∫–∞—Ö –ü–µ–Ω—Ä–æ—É–∑–∞

–í –ø–∞—Ç—Ç–µ—Ä–Ω–µ –ü–µ–Ω—Ä–æ—É–∑–∞ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ç–æ–Ω–∫–∏—Ö –∫ —Ç–æ–ª—Å—Ç—ã–º —Ä–æ–º–±–∞–º —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫:
```
—Ç–æ–Ω–∫–∏–µ / —Ç–æ–ª—Å—Ç—ã–µ ‚âà 1/œÜ ‚âà 0.618
```
–≥–¥–µ œÜ (—Ñ–∏) = (1+‚àö5)/2 ‚âà 1.618 - –∑–æ–ª–æ—Ç–æ–µ —Å–µ—á–µ–Ω–∏–µ

### –ü–ª–æ—â–∞–¥–∏ —Ä–æ–º–±–æ–≤

```
–¢–æ–Ω–∫–∏–π —Ä–æ–º–± (36¬∞):  S = a¬≤ √ó sin(36¬∞) ‚âà 0.588 √ó a¬≤
–¢–æ–ª—Å—Ç—ã–π —Ä–æ–º–± (72¬∞): S = a¬≤ √ó sin(72¬∞) ‚âà 0.951 √ó a¬≤
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

‚úÖ **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∏—Ç–æ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º —Ä–∞–∑–º–µ—Ä–∞–º  
‚úÖ **–õ–æ–≥–∏—á–Ω–æ—Å—Ç—å** - –±–æ–ª—å—à–µ –ø–ª–∏—Ç–∫–∞ = –º–µ–Ω—å—à–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ  
‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å** - —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å –∫–æ–º–Ω–∞—Ç—ã  
‚úÖ **–ü—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —É–∫–ª–∞–¥–∫—É –ø–ª–∏—Ç–∫–∏
